<!--
    ç”¨æˆ·æ³¨å†Œé¢æ¿ç»„ä»¶
    
    è¯¥ç»„ä»¶æä¾›äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œç•Œé¢ï¼Œæ”¯æŒå®æ—¶éªŒè¯å’Œå¯ç”¨æ€§æ£€æŸ¥ã€‚
    é‡‡ç”¨ä¸ç™»å½•é¢æ¿ç›¸ä¼¼çš„åŒæ å¸ƒå±€è®¾è®¡ï¼Œå·¦ä¾§ä¸ºå“ç‰Œå±•ç¤ºï¼Œå³ä¾§ä¸ºæ³¨å†Œè¡¨å•ã€‚
    
    åŠŸèƒ½ç‰¹æ€§ï¼š
    - å®Œæ•´çš„æ³¨å†Œè¡¨å•ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ã€ç¡®è®¤å¯†ç ã€å§“åï¼‰
    - å®æ—¶ç”¨æˆ·åå’Œé‚®ç®±å¯ç”¨æ€§æ£€æŸ¥
    - å¯†ç å¼ºåº¦éªŒè¯å’Œæ˜¾ç¤º/éšè—åˆ‡æ¢
    - ç¡®è®¤å¯†ç ä¸€è‡´æ€§éªŒè¯
    - è¡¨å•éªŒè¯å’Œé”™è¯¯æç¤º
    - æ³¨å†ŒçŠ¶æ€åŠ è½½æŒ‡ç¤ºå™¨
    - ç™»å½•é¡µé¢åˆ‡æ¢é“¾æ¥
    
    éªŒè¯åŠŸèƒ½ï¼š
    - ç”¨æˆ·åæ ¼å¼å’Œå¯ç”¨æ€§æ£€æŸ¥
    - é‚®ç®±æ ¼å¼å’Œå¯ç”¨æ€§æ£€æŸ¥
    - å¯†ç å¼ºåº¦è¦æ±‚éªŒè¯
    - ç¡®è®¤å¯†ç ä¸€è‡´æ€§éªŒè¯
    - å®æ—¶çŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆæ£€æŸ¥ä¸­ã€æˆåŠŸã€å¤±è´¥ï¼‰
    
    è®¾è®¡ç‰¹ç‚¹ï¼š
    - æ¸å˜èƒŒæ™¯å’Œå¡ç‰‡è®¾è®¡
    - è£…é¥°æ€§æµ®åŠ¨å…ƒç´ åŠ¨ç”»
    - å“åº”å¼å¸ƒå±€å’Œç§»åŠ¨ç«¯é€‚é…
    - ç°ä»£åŒ–çš„è¡¨å•è®¾è®¡
    - çŠ¶æ€æŒ‡ç¤ºå™¨å’Œé”™è¯¯æç¤º
    
    æ•°æ®æµç¨‹ï¼š
    - å®æ—¶éªŒè¯è¡¨å•å­—æ®µ
    - å¼‚æ­¥æ£€æŸ¥ç”¨æˆ·åå’Œé‚®ç®±å¯ç”¨æ€§
    - è°ƒç”¨æ³¨å†ŒAPIåˆ›å»ºæ–°ç”¨æˆ·
    - æˆåŠŸåè‡ªåŠ¨ç™»å½•å¹¶ä¿å­˜çŠ¶æ€
    - é€šçŸ¥çˆ¶ç»„ä»¶å…³é—­æ¨¡æ€æ¡†
    
    æŠ€æœ¯å®ç°ï¼š
    - Vue 3 Composition API
    - TypeScript ç±»å‹å®‰å…¨
    - Reactive è¡¨å•æ•°æ®ç®¡ç†
    - é˜²æŠ–ä¼˜åŒ–APIè°ƒç”¨
    - CSS åŠ¨ç”»å’Œæ¸å˜æ•ˆæœ
    
    ä½¿ç”¨åœºæ™¯ï¼š
    - æ–°ç”¨æˆ·è´¦æˆ·åˆ›å»º
    - ä¼šå‘˜ç³»ç»Ÿæ³¨å†Œæµç¨‹
    - ç”¨æˆ·èº«ä»½éªŒè¯æ‰©å±•
    
    @author EcoWiki Team
    @version 1.0.0
    @since 2024-01-01
  -->
  <template>
    <div class="register-card">
      <div class="card-content">
        <!-- å·¦ä¾§å†…å®¹åŒº - å“ç‰Œå±•ç¤ºå’Œæ¬¢è¿ä¿¡æ¯ -->
        <div class="content-left">
          <!-- è£…é¥°æ€§èƒŒæ™¯åŠ¨ç”»å…ƒç´  -->
          <div class="decorative-bg">
            <div class="floating-circle circle-1"></div>
            <div class="floating-circle circle-2"></div>
            <div class="floating-circle circle-3"></div>
          </div>
          
          <!-- Logo åŒºåŸŸ -->
          <div class="logo-section">
            <div class="logo">
              <div class="logo-circle">
                <span class="logo-text">EcoWiki</span>
              </div>
            </div>
          </div>
          
          <!-- æ ‡é¢˜åŒºåŸŸ -->
          <div class="register-header">
            <h1 class="register-title">åŠ å…¥æˆ‘ä»¬ï¼</h1>
            <p class="register-subtitle">å¼€å¯æ¢ç´¢ä¹‹æ—…</p>
          </div>
        </div>
        
        <!-- å³ä¾§è¡¨å•åŒº - æ³¨å†Œè¡¨å• -->
        <div class="content-right">
          <div class="form-container">
            <form @submit.prevent="handleRegister" class="register-form">
              <!-- ç”¨æˆ·åè¾“å…¥æ¡†ï¼ˆå¸¦å¯ç”¨æ€§æ£€æŸ¥ï¼‰ -->
              <div class="form-group">
                <div class="input-wrapper">
                  <input
                    id="username"
                    v-model="formData.username"
                    @input="onUsernameChange"
                    type="text"
                    class="form-input"
                    :class="{ 
                      'error': showErrors && errors.username,
                      'success': usernameAvailable === true,
                      'checking': usernameChecking
                    }"
                    placeholder="ç”¨æˆ·å"
                    required
                  />
                  <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
                  <div class="input-status">
                    <span v-if="usernameChecking" class="checking-icon">â³</span>
                    <span v-else-if="usernameAvailable === true" class="success-icon">âœ“</span>
                    <span v-else-if="usernameAvailable === false" class="error-icon">âœ—</span>
                  </div>
                </div>
                <!-- é”™è¯¯æ¶ˆæ¯æ˜¾ç¤º -->
                <div class="error-message" v-if="showErrors && errors.username">
                  {{ errors.username }}
                </div>
                <div class="error-message" v-else-if="usernameAvailable === false">
                  è¯¥ç”¨æˆ·åå·²è¢«ä½¿ç”¨
                </div>
              </div>
              
              <!-- é‚®ç®±è¾“å…¥æ¡†ï¼ˆå¸¦å¯ç”¨æ€§æ£€æŸ¥ï¼‰ -->
              <div class="form-group">
                <div class="input-wrapper">
                  <input
                    id="email"
                    v-model="formData.email"
                    @input="onEmailChange"
                    type="email"
                    class="form-input"
                    :class="{ 
                      'error': showErrors && errors.email,
                      'success': emailAvailable === true,
                      'checking': emailChecking
                    }"
                    placeholder="é‚®ç®±"
                    required
                  />
                  <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
                  <div class="input-status">
                    <span v-if="emailChecking" class="checking-icon">â³</span>
                    <span v-else-if="emailAvailable === true" class="success-icon">âœ“</span>
                    <span v-else-if="emailAvailable === false" class="error-icon">âœ—</span>
                  </div>
                </div>
                <!-- é”™è¯¯æ¶ˆæ¯æ˜¾ç¤º -->
                <div class="error-message" v-if="showErrors && errors.email">
                  {{ errors.email }}
                </div>
                <div class="error-message" v-else-if="emailAvailable === false">
                  è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ
                </div>
              </div>
              
              <!-- å…¨åè¾“å…¥å­—æ®µï¼ˆå¯é€‰ï¼‰ -->
              <div class="form-group">
                <input
                  id="fullName"
                  v-model="formData.fullName"
                  type="text"
                  class="form-input"
                  placeholder="å§“åï¼ˆå¯é€‰ï¼‰"
                />
              </div>
              
              <div class="form-group">
                <input
                  id="password"
                  v-model="formData.password"
                  type="password"
                  class="form-input"
                  :class="{ 'error': showErrors && errors.password }"
                  placeholder="è¯·è¾“å…¥å¯†ç "
                  required
                />
                <div class="error-message" v-if="showErrors && errors.password">
                  {{ errors.password }}
                </div>
              </div>
              
              <div class="form-group">
                <input
                  id="confirmPassword"
                  v-model="formData.confirmPassword"
                  type="password"
                  class="form-input"
                  :class="{ 'error': showErrors && errors.confirmPassword }"
                  placeholder="ç¡®è®¤å¯†ç "
                  required
                />
                <div class="error-message" v-if="showErrors && errors.confirmPassword">
                  {{ errors.confirmPassword }}
                </div>
              </div>
              
              <!-- äººæœºéªŒè¯æŒ‰é’®/æ³¨å†ŒæŒ‰é’®åˆ‡æ¢ -->
              <div class="form-group slider-btn-group">
                <button
                  v-if="!sliderVerified"
                  type="button"
                  class="verify-human-btn"
                  @click="showSliderModal = true"
                  :disabled="isLoading"
                >
                  éªŒè¯æ˜¯å¦æ˜¯äººæœº
                </button>
                <button
                  v-else
                  type="submit"
                  class="register-button"
                  :disabled="isLoading || !canSubmit"
                >
                  <span v-if="isLoading" class="loading-spinner"></span>
                  {{ isLoading ? 'åˆ›å»ºä¸­...' : 'æ³¨å†Œ' }}
                </button>
              </div>

              <!-- æ»‘å—å¼¹çª— -->
              <div v-if="showSliderModal" class="slider-modal-mask" :class="{ active: showSliderModal }" @click="handleMaskClick">
                <div class="slider-modal">
                  <div class="slider-modal-header">
                    <div class="slider-modal-title">
                      <span class="security-icon">ğŸ›¡ï¸</span>
                      å®‰å…¨éªŒè¯
                    </div>
                    <button class="slider-modal-close" @click="closeSliderModal">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                      </svg>
                    </button>
                  </div>
                  
                  <div class="slider-modal-content">
                    <div class="verification-instruction">
                      <p v-if="!sliderVerified">è¯·æ‹–åŠ¨æ»‘å—å®ŒæˆéªŒè¯</p>
                      <p v-else class="success-text">
                        <span class="success-icon">âœ“</span>
                        éªŒè¯æˆåŠŸ
                      </p>
                    </div>
                    
                    <!-- ä½¿ç”¨æ–°çš„æ»‘å—ç»„ä»¶ -->
                    <div class="new-slider-container">
                      <SliderCaptcha 
                        ref="sliderCaptchaRef"
                        @success="handleSliderSuccess"
                        @reset="handleSliderReset"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <!-- åº•éƒ¨é“¾æ¥ -->
              <div class="form-footer">
                <span class="login-prompt">å·²æœ‰è´¦æˆ·ï¼Ÿ</span>
                <a href="#" @click="$emit('switchToLogin')" class="login-link">ç™»å½•</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </template>

  <script setup lang="ts">
  import { ref, reactive, computed, onMounted, onBeforeUnmount, watch } from 'vue'
  import { userApi } from '../api/user'
  import { validateRegisterForm, debounce, type FormErrors } from '../utils/validation'
  import { useAuth } from '../composables/useAuth'
  import toast from '../utils/toast'
  import SliderCaptcha from './SliderCaptcha.vue'

  // å®šä¹‰ emits
  const emit = defineEmits(['switchToLogin', 'registerSuccess'])

  // ä½¿ç”¨è®¤è¯çŠ¶æ€
  const { setUser } = useAuth()

  // å“åº”å¼æ•°æ®
  const isLoading = ref(false)
  const errors = ref<FormErrors>({})
  const showErrors = ref(false)

  const formData = reactive({
    username: '',
    email: '',
    password: '',
    confirmPassword: '',
    fullName: '' // æ·»åŠ å…¨åå­—æ®µ
  })

  // å®æ—¶éªŒè¯çŠ¶æ€
  const usernameChecking = ref(false)
  const emailChecking = ref(false)
  const usernameAvailable = ref<boolean | null>(null)
  const emailAvailable = ref<boolean | null>(null)

  // è®¡ç®—æ˜¯å¦å¯ä»¥æäº¤è¡¨å•
  const canSubmit = computed(() => {
    const formErrors = validateRegisterForm(formData)
    return Object.keys(formErrors).length === 0 && 
          usernameAvailable.value === true && 
          emailAvailable.value === true
  })

  // é˜²æŠ–æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§
  const checkUsernameAvailability = debounce(async (username: string) => {
    if (!username || username.length < 3) return
    
    usernameChecking.value = true
    try {
      usernameAvailable.value = await userApi.checkUsername(username)
    } catch (error) {
      console.error('æ£€æŸ¥ç”¨æˆ·åå¤±è´¥:', error)
      usernameAvailable.value = null
    } finally {
      usernameChecking.value = false
    }
  }, 500)

  // é˜²æŠ–æ£€æŸ¥é‚®ç®±å¯ç”¨æ€§
  const checkEmailAvailability = debounce(async (email: string) => {
    if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) return
    
    emailChecking.value = true
    try {
      emailAvailable.value = await userApi.checkEmail(email)
    } catch (error) {
      console.error('æ£€æŸ¥é‚®ç®±å¤±è´¥:', error)
      emailAvailable.value = null
    } finally {
      emailChecking.value = false
    }
  }, 500)

  // ç›‘å¬ç”¨æˆ·åå˜åŒ–
  const onUsernameChange = () => {
    usernameAvailable.value = null
    if (formData.username) {
      checkUsernameAvailability(formData.username)
    }
  }

  // ç›‘å¬é‚®ç®±å˜åŒ–
  const onEmailChange = () => {
    emailAvailable.value = null
    if (formData.email) {
      checkEmailAvailability(formData.email)
    }
  }

  // æ³¨å†Œå¤„ç†å‡½æ•°
  const handleRegister = async () => {
    // æ˜¾ç¤ºé”™è¯¯æç¤º
    showErrors.value = true
    
    // éªŒè¯è¡¨å•
    errors.value = validateRegisterForm(formData)
    
    if (!canSubmit.value) {
      return
    }
    
    isLoading.value = true
    
    try {
      // è°ƒç”¨æ³¨å†ŒAPI
      const response = await userApi.register({
        username: formData.username,
        email: formData.email,
        password: formData.password,
        fullName: formData.fullName // ä¼ é€’å…¨å
      })
      
      // æ³¨å†ŒæˆåŠŸï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯å’Œtoken
      setUser(response.user, response.token, response.refreshToken)
      
      toast.success('æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿åŠ å…¥EcoWiki', 'æ³¨å†ŒæˆåŠŸ')
      
      // é€šçŸ¥çˆ¶ç»„ä»¶æ³¨å†ŒæˆåŠŸï¼Œå…³é—­æ¨¡æ€æ¡†
      emit('registerSuccess')
      
    } catch (error: any) {
      console.error('æ³¨å†Œå¤±è´¥:', error)
      
      // å¤„ç†ç‰¹å®šçš„æ³¨å†Œé”™è¯¯
      if (error.message.includes('ç”¨æˆ·å')) {
        usernameAvailable.value = false
      } else if (error.message.includes('é‚®ç®±')) {
        emailAvailable.value = false
      }
      
      toast.error(error.message || 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•', 'æ³¨å†Œå¤±è´¥')
    } finally {
      isLoading.value = false
    }
  }

  // æ–°çš„æ»‘å—éªŒè¯ç›¸å…³
  const sliderVerified = ref(false)
  const showSliderModal = ref(false)
  const sliderCaptchaRef = ref<InstanceType<typeof SliderCaptcha> | null>(null)

  // å¤„ç†é®ç½©ç‚¹å‡»
  const handleMaskClick = (e: MouseEvent) => {
    if (e.target === e.currentTarget) {
      closeSliderModal()
    }
  }

  // æ»‘å—éªŒè¯æˆåŠŸå¤„ç†
  const handleSliderSuccess = () => {
    sliderVerified.value = true
    console.log('æ»‘å—éªŒè¯æˆåŠŸ')
    
    // å»¶è¿Ÿå…³é—­å¼¹çª—
    setTimeout(() => {
      showSliderModal.value = false
    }, 1500)
  }

  // æ»‘å—é‡ç½®å¤„ç†
  const handleSliderReset = () => {
    console.log('æ»‘å—å·²é‡ç½®')
  }

  // å…³é—­æ»‘å—å¼¹çª—
  const closeSliderModal = () => {
    showSliderModal.value = false
    // é‡ç½®æ»‘å—çŠ¶æ€
    if (sliderCaptchaRef.value) {
      sliderCaptchaRef.value.reset()
    }
    sliderVerified.value = false
  }

  // ç›‘å¬å¼¹çª—æ˜¾ç¤ºçŠ¶æ€ï¼Œé‡ç½®æ»‘å—
  watch(showSliderModal, (val) => {
    if (val) {
      // å¼¹çª—æ‰“å¼€æ—¶é‡ç½®æ»‘å—
      setTimeout(() => {
        if (sliderCaptchaRef.value) {
          sliderCaptchaRef.value.reset()
        }
        sliderVerified.value = false
      }, 100)
    }
  })

  onMounted(() => {
    // ç§»é™¤æ—§çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œæ–°æ»‘å—ç»„ä»¶è‡ªå·±å¤„ç†
  })
  
  onBeforeUnmount(() => {
    // æ¸…ç†å·¥ä½œ
  })
  </script>

  <style scoped>
  .register-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
    overflow: hidden;
    transition: all 0.4s ease;
    animation: cardFadeIn 0.6s ease-out;
    max-width: 500px;
    margin: 0 auto;
  }

  @keyframes cardFadeIn {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.98);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .card-content {
    display: flex;
    min-height: 600px;
  }

  .content-left {
    flex: 1;
    background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.98) 100%);
    padding: 40px 30px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(20px);
    border-right: 1px solid rgba(255, 255, 255, 0.2);
  }

  .decorative-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
  }

  .floating-circle {
    position: absolute;
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.12) 100%);
    animation: float 8s ease-in-out infinite;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(102, 126, 234, 0.1);
  }

  .circle-1 {
    width: 60px;
    height: 60px;
    top: 10%;
    left: -10px;
    animation-delay: 0s;
  }

  .circle-2 {
    width: 40px;
    height: 40px;
    top: 60%;
    right: -5px;
    animation-delay: 2.5s;
  }

  .circle-3 {
    width: 30px;
    height: 30px;
    bottom: 15%;
    left: 40%;
    animation-delay: 5s;
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-20px) rotate(180deg);
    }
  }

  .logo-section {
    margin-bottom: 25px;
    text-align: center;
  }

  .logo-circle {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.25);
    border: 3px solid rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    position: relative;
  }

  .logo-circle::before {
    content: '';
    position: absolute;
    top: -3px;
    left: -3px;
    right: -3px;
    bottom: -3px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    z-index: -1;
    opacity: 0.6;
    filter: blur(8px);
  }

  .logo-text {
    color: white;
    font-size: 0.9rem;
    font-weight: 700;
    letter-spacing: -0.5px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    z-index: 1;
    position: relative;
  }

  .register-header {
    text-align: center;
  }

  .register-title {
    color: #1a202c;
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 8px;
    letter-spacing: -0.5px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .register-subtitle {
    color: #4a5568;
    font-size: 0.9rem;
    margin: 0;
    line-height: 1.4;
    font-weight: 500;
  }

  .content-right {
    flex: 1;
    background: white;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .form-container {
    width: 100%;
    padding: 40px 30px;
  }

  .register-form {
    width: 100%;
  }

  .form-group {
    margin-bottom: 18px;
  }

  .input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }

  .form-input {
    width: 100%;
    padding: 14px 40px 14px 0;
    border: none;
    border-bottom: 2px solid #e2e8f0;
    background: transparent;
    font-size: 1rem;
    color: #2d3748;
    transition: all 0.3s ease;
    box-sizing: border-box;
  }

  .form-input::placeholder {
    color: #a0aec0;
    font-weight: 400;
  }

  .form-input:focus {
    outline: none;
    border-bottom-color: #667eea;
    background: rgba(102, 126, 234, 0.02);
  }

  .form-input:focus::placeholder {
    color: transparent;
  }

  .form-input.error {
    border-bottom-color: #e74c3c;
    background: rgba(231, 76, 60, 0.02);
  }

  .form-input.success {
    border-bottom-color: #27ae60;
    background: rgba(39, 174, 96, 0.02);
  }

  .form-input.checking {
    border-bottom-color: #f39c12;
  }

  .input-status {
    position: absolute;
    right: 0;
    display: flex;
    align-items: center;
  }

  .success-icon {
    color: #27ae60;
    font-weight: bold;
    font-size: 16px;
  }

  .error-icon {
    color: #e74c3c;
    font-weight: bold;
    font-size: 16px;
  }

  .checking-icon {
    font-size: 14px;
    animation: pulse 1s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .error-message {
    color: #e74c3c;
    font-size: 12px;
    margin-top: 4px;
    min-height: 16px;
  }

  .register-button {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin: 25px 0 20px 0;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.35);
  }

  .register-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
  }

  .register-button:hover::before {
    left: 100%;
  }

  .register-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.45);
  }

  .register-button:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
  }

  .form-footer {
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    font-size: 0.9rem;
  }

  .login-prompt {
    color: #718096;
  }

  .login-link {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
  }

  .login-link:hover {
    color: #764ba2;
  }

  .loading-spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s linear infinite;
    margin-right: 6px;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }



  .slider-btn-group {
    margin-bottom: 18px;
    text-align: center;
  }
  .verify-human-btn {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin: 25px 0 20px 0;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.35);
    display: block;
  }
  .verify-human-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
  }
  .verify-human-btn:hover::before {
    left: 100%;
  }
  .verify-human-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.45);
  }
  .verify-human-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
  }

  /* æ»‘å—å¼¹çª—ç¾åŒ– */
  .slider-modal-mask {
    position: fixed;
    left: 0; top: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.25);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(12px) saturate(1.3);
    -webkit-backdrop-filter: blur(12px) saturate(1.3);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }

  .slider-modal-mask.active {
    opacity: 1;
    visibility: visible;
  }

  .slider-modal {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 24px;
    width: 480px;
    max-width: 90vw;
    box-shadow: 
      0 20px 60px 0 rgba(102, 126, 234, 0.15),
      0 8px 32px 0 rgba(118, 75, 162, 0.1),
      0 0 0 1px rgba(255, 255, 255, 0.8) inset;
    position: relative;
    animation: modalSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    backdrop-filter: blur(20px) saturate(1.8);
    -webkit-backdrop-filter: blur(20px) saturate(1.8);
    border: 1px solid rgba(255, 255, 255, 0.3);
    overflow: hidden;
  }

  @keyframes modalSlideIn {
    from { 
      opacity: 0; 
      transform: scale(0.9) translateY(20px); 
    }
    to { 
      opacity: 1; 
      transform: scale(1) translateY(0); 
    }
  }

  .slider-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 24px 32px 0;
    border-bottom: 1px solid rgba(102, 126, 234, 0.08);
    margin-bottom: 32px;
  }

  .slider-modal-title {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 20px;
    font-weight: 700;
    color: #2d3748;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.5px;
  }

  .security-icon {
    font-size: 24px;
    filter: drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2));
  }

  .slider-modal-close {
    width: 36px;
    height: 36px;
    border: none;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #6b7280;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .slider-modal-close:hover {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    transform: rotate(90deg);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
  }

  .slider-modal-content {
    padding: 0 32px 32px;
  }

  .verification-instruction {
    text-align: center;
    margin-bottom: 24px;
  }

  .verification-instruction p {
    font-size: 16px;
    color: #4a5568;
    margin: 0;
    font-weight: 500;
    letter-spacing: 0.5px;
  }

  .success-text {
    color: #10b981 !important;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: 600 !important;
  }

  .success-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    border-radius: 50%;
    font-size: 12px;
    font-weight: bold;
    animation: successPulse 0.6s ease-out;
  }

  @keyframes successPulse {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }



  @media (max-width: 768px) {
    .register-card {
      max-width: 420px;
    }
    
    .card-content {
      flex-direction: column;
      min-height: auto;
    }
    
    .content-left {
      padding: 30px 25px;
      flex: none;
      border-right: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .content-right {
      padding: 0;
    }
    
    .form-container {
      padding: 30px 25px;
    }
    
    .register-title {
      font-size: 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .register-card {
      max-width: 360px;
    }
    
    .form-container {
      padding: 25px 20px;
    }
    
    .content-left {
      padding: 25px 20px;
    }
  }

  /* æ–°æ»‘å—å®¹å™¨æ ·å¼ */
  .new-slider-container {
    margin: 20px 0;
    padding: 0;
  }
  </style>
