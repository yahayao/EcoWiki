# 文章审核系统快速入门指南

## 🚀 5分钟快速开始

### 第一步：环境准备

1. **确保数据库已初始化**
   ```bash
   mysql -u root -p ecowiki < ARTICLE_REVIEW_SYSTEM_INIT.sql
   ```

2. **启动后端服务**
   ```bash
   cd www/backend
   mvn spring-boot:run
   ```

3. **启动前端服务**
   ```bash
   cd www/frontend
   npm run dev
   ```

### 第二步：基础配置

1. **设置审核员权限**
   - 登录管理员账号
   - 进入用户管理 → 角色权限
   - 为用户分配 `review.process` 权限

2. **配置审核规则**
   - 进入系统设置 → 审核配置
   - 设置自动分配规则
   - 配置审核超时时间

### 第三步：创建第一个审核

1. **进入审核管理界面**
   - 访问: `http://localhost:3000/review/dashboard`

2. **点击"创建审核"按钮**

3. **填写审核信息**
   - 文章ID: 输入需要审核的文章ID
   - 审核类型: 选择CREATE/UPDATE/DELETE
   - 内容快照: 可选填写
   - 自动发布: 勾选后审核通过自动发布

4. **提交审核申请**

### 第四步：处理审核

1. **审核员登录系统**

2. **查看待审核列表**
   - 系统会自动分配审核任务
   - 或手动分配特定审核员

3. **处理审核**
   - 点击审核项目查看详情
   - 选择"通过"或"拒绝"
   - 填写审核意见
   - 提交审核结果

## 🎯 核心功能演示

### 创建审核示例

```typescript
// 前端调用示例
const createReview = async () => {
  try {
    const response = await reviewApi.create({
      articleId: 123,
      submitterId: getCurrentUserId(),
      reviewType: 'CREATE',
      contentSnapshot: '文章内容...',
      autoPublish: true
    });
    
    if (response.success) {
      ElMessage.success('审核申请创建成功');
      refreshReviewList();
    }
  } catch (error) {
    ElMessage.error('创建失败: ' + error.message);
  }
};
```

### 处理审核示例

```typescript
// 审核处理示例
const processReview = async (reviewId: number, approved: boolean) => {
  try {
    const response = await reviewApi.process(reviewId, {
      reviewerId: getCurrentUserId(),
      approved: approved,
      reason: approved ? '内容质量良好' : '需要修改格式'
    });
    
    if (response.success) {
      ElMessage.success(approved ? '审核通过' : '审核拒绝');
      refreshReviewList();
    }
  } catch (error) {
    ElMessage.error('处理失败: ' + error.message);
  }
};
```

## 🔧 常用操作

### 1. 查看审核统计
```javascript
// 获取审核统计数据
const getStatistics = async () => {
  const response = await reviewApi.getStatistics();
  return response.data;
};
```

### 2. 搜索审核记录
```javascript
// 搜索审核记录
const searchReviews = async (params) => {
  const response = await reviewApi.search({
    keyword: params.keyword,
    status: params.status,
    reviewType: params.reviewType,
    page: params.page,
    size: params.size
  });
  return response.data;
};
```

### 3. 批量处理审核
```javascript
// 批量处理审核
const batchProcess = async (reviewIds, action) => {
  const response = await reviewApi.batchProcess(
    reviewIds, 
    action, 
    '批量处理'
  );
  return response.data;
};
```

## 📱 界面截图说明

### 审核管理主界面
- **统计面板**: 显示总审核数、待审核数、通过率等
- **筛选器**: 按状态、类型、时间范围筛选
- **审核列表**: 显示所有审核记录的详细信息
- **操作按钮**: 创建、分配、处理、查看详情

### 创建审核对话框
- **文章ID输入**: 数字输入框，支持验证
- **审核类型选择**: 下拉选择CREATE/UPDATE/DELETE
- **内容快照**: 多行文本输入，可选填写
- **自动发布开关**: 勾选后审核通过自动发布文章

### 审核处理界面
- **审核详情**: 显示文章信息、提交者、审核类型
- **审核操作**: 通过/拒绝单选按钮
- **审核意见**: 必填的文本区域
- **历史记录**: 显示该审核的所有操作历史

## ⚠️ 注意事项

### 权限要求
- **创建审核**: 需要 `review.create` 权限
- **处理审核**: 需要 `review.process` 权限
- **管理审核**: 需要 `review.manage` 权限

### 数据约束
- 文章ID必须存在且大于0
- 审核类型必须是有效枚举值
- 内容快照长度不超过1000字符

### 业务规则
- 每篇文章在同一状态下只能有一个待审核记录
- 审核员不能审核自己提交的文章
- 超级管理员可以审核所有文章

## 🐛 故障排除

### 常见错误及解决方案

1. **"找不到文章ID"**
   - 检查文章ID是否正确
   - 确认文章是否存在于数据库中

2. **"权限不足"**
   - 检查用户角色权限配置
   - 确认用户已登录且session有效

3. **"审核员分配失败"**
   - 检查是否有可用的审核员
   - 确认审核员权限配置正确

4. **"消息发送失败"**
   - 检查消息服务是否正常运行
   - 确认目标用户ID有效

### 日志查看
```bash
# 查看审核服务日志
tail -f logs/review-service.log

# 查看错误日志
grep "ERROR" logs/application.log

# 查看API调用日志
grep "review" logs/access.log
```

## 📞 获取帮助

- **在线文档**: 查看完整的《文章审核系统使用文档.md》
- **API文档**: 访问 `/api/docs` 查看详细的API接口文档
- **问题反馈**: 通过GitHub Issues报告问题
- **技术支持**: 联系开发团队获取技术支持

---

**提示**: 本指南涵盖了基础使用方法，更多高级功能请参考完整文档。
