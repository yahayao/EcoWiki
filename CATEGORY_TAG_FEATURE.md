# Wiki分类自动识别为标签功能

## 功能概述

EcoWiki现在支持将Wiki分类语法自动识别并转换为文章标签。用户在编辑文章时使用分类语法，系统会自动将这些分类提取并添加到文章的标签中。

## 支持的分类语法

### 基本语法
- `[[分类:环保]]` - 中文分类语法
- `[[Category:技术]]` - 英文分类语法

### 带排序关键字的分类
- `[[分类:环保|环境保护]]` - 带排序关键字的分类
- `[[Category:技术|Technology]]` - 英文带排序关键字

## 功能特点

### 1. 自动提取
- 当用户在文章内容中使用分类语法时，系统会自动识别并提取分类名称
- 分类会被自动设置为文章的标签字段
- 完全基于Wiki分类语法，无需手动输入标签

### 2. 实时预览
- 在预览模式下，系统会实时提取分类并更新标签字段
- 用户可以即时看到分类被转换为标签的效果

### 3. 保存时处理
- 在保存文章时，系统会再次执行分类提取
- 确保所有分类都被正确转换为标签保存到数据库

### 4. 显示优化
- 分类语法在预览和最终显示中会被隐藏，不会影响文章内容的可读性
- 分类信息以标签徽章的形式在编辑器中实时显示
- 移除了手动标签输入框，完全依赖Wiki分类语法

## 使用示例

### 编辑器中的内容：
```wiki
这是一篇关于环保的文章。

== 概述 ==
环保是我们每个人的责任...

== 技术方案 ==
通过技术手段可以...

[[分类:环保]]
[[分类:技术]]
[[Category:教育]]
```

### 自动提取的标签：
系统会自动将以下标签设置为文章标签：
- 环保
- 技术  
- 教育

### 最终显示效果：
- 文章内容中不会显示分类语法
- 标签字段会显示：`环保, 技术, 教育`
- 编辑器中会显示标签徽章：🏷️ 环保 🏷️ 技术 🏷️ 教育

## 编辑器工具栏支持

### 新增分类按钮
- 工具栏新增 `🏷 分类` 按钮
- 点击后会插入 `[[分类:环保]]` 模板
- 用户可以修改分类名称

### 帮助信息
- WikiEditor帮助面板中新增了分类语法说明
- 在编辑器中实时显示提取的标签徽章
- 移除了手动标签输入框，简化用户界面

## 技术实现

### 前端实现
1. **WikiParser扩展**：
   - 新增 `parseCategories()` 方法处理分类语法
   - 新增 `getExtractedCategories()` 方法获取提取的分类
   - 新增 `clearExtractedCategories()` 方法清除缓存的分类

2. **ArticleEdit组件增强**：
   - 在预览更新时自动提取分类
   - 在保存前自动提取分类并设置为标签
   - 移除手动标签输入框，添加标签徽章显示
   - 添加UI提示和工具栏按钮

### 后端支持
- 后端已有完整的标签支持，包括：
  - Article实体的tags字段
  - 标签相关的API接口
  - 按标签查询文章的功能

## 兼容性

### 向后兼容
- 现有文章不会受到影响
- 分类语法是基于标准Wiki语法，兼容性良好
- 不使用分类语法的文章标签字段为空

### 标签生成策略
- 完全基于Wiki分类语法生成标签
- 自动去除重复标签
- 标签按在文章中出现的顺序排列

## 用户体验优化

### 视觉提示
- 编辑器中实时显示提取的标签徽章
- WikiEditor中新增分类语法的帮助文档
- 工具栏按钮有明确的图标和提示

### 操作便利性
- 一键插入分类语法
- 实时预览分类提取效果
- 简化的界面，专注于Wiki语法

## 未来扩展

可以考虑的功能扩展：
1. 支持更多Wiki分类语法变体
2. 分类的层次结构支持
3. 分类的自动补全和建议
4. 分类统计和热门分类展示
5. 分类页面的自动生成

---

这个功能让EcoWiki的标签系统更加纯粹和标准化，完全基于Wiki分类语法自动生成标签，用户只需专注于内容创作和使用标准的Wiki语法即可。
